import{I as b,d as H,r as f,B as J,e as s,c as C,o as m,b as t,w as l,i as g,h as o,J as w,F as z,p as I,k as r,t as S,q as $,K as i,_ as R}from"./index-DuhZuMDA.js";const G=(u,c)=>b.get(`/admin/product/list/${u}/${c}`),O=u=>b.get(`/admin/product/onSale/${u}`),Q=u=>b.get(`/admin/product/cancelSale/${u}`),W=u=>b.get(`/admin/product/getSkuInfo/${u}`),X=u=>b.delete(`/admin/product/deleteSku/${u}`),Y=["src"],Z={class:"demo-pagination-block"},ee={class:"block text-center"},te={class:"small justify-center",text:"2xl"},le=["src"],ae=H({__name:"index",setup(u){let c=f(!1),k=f(1),h=f(10),D=f(0),N=f([]),p=f();J(()=>{v()});const v=()=>{G(k.value,h.value).then(n=>{n.code===200&&(D.value=n.data.total,N.value=n.data.records)})},B=n=>{n.isSale===1?Q(n.id).then(e=>{e.code===200&&(i.success("下架成功"),n.isSale=0)}).catch(e=>{i.error("下架失败,"+e.message)}):O(n.id).then(e=>{e.code===200&&(i.success("上架成功"),n.isSale=1)}).catch(e=>{i.error("上架失败,"+e.message)})},A=()=>{i.success("正在开发中……")},U=n=>{c.value=!0,W(n.id).then(e=>{p.value=e.data}).catch(e=>{i.error("获取数据失败,"+e.message)})},L=n=>{X(n.id).then(e=>{e.code===200&&(i.success("删除成功"),v())}).catch(e=>{i.error("删除失败,"+e.message)})};return(n,e)=>{const _=s("el-table-column"),y=s("el-button"),E=s("el-popconfirm"),F=s("el-table"),j=s("el-pagination"),K=s("el-carousel-item"),M=s("el-carousel"),d=s("el-col"),x=s("el-row"),V=s("el-tag"),P=s("el-drawer"),T=s("el-card");return m(),C("div",null,[t(T,null,{default:l(()=>[t(F,{border:"",style:{margin:"10px 0",height:"85vh"},data:o(N)},{default:l(()=>[t(_,{label:"序号",type:"index",align:"center",width:"80px"}),t(_,{label:"名称",prop:"skuName",width:"150px"}),t(_,{label:"描述",prop:"skuDesc"}),t(_,{label:"默认图片",width:"150px"},{default:l(({row:a})=>[g("img",{src:a.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,Y)]),_:1}),t(_,{label:"重量",prop:"weight",width:"100px"}),t(_,{label:"价格",prop:"price",width:"100px"}),t(_,{label:"操作",width:"280px",fixed:"right"},{default:l(({row:a})=>[t(y,{type:a.isSale===1?"danger":"success",size:"default",icon:a.isSale===1?"Bottom":"Top",onClick:q=>B(a)},null,8,["type","icon","onClick"]),t(y,{type:"warning",size:"default",icon:"Edit",onClick:A}),t(y,{type:"info",size:"default",icon:"InfoFilled",onClick:q=>U(a)},null,8,["onClick"]),t(E,{title:`您确定删除${a.skuName}吗?`,width:"200px",onConfirm:q=>L(a)},{reference:l(()=>[t(y,{type:"danger",size:"default",icon:"Delete",title:"删除SKU"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),g("div",Z,[t(j,{"current-page":o(k),"onUpdate:currentPage":e[0]||(e[0]=a=>w(k)?k.value=a:k=a),"page-size":o(h),"onUpdate:pageSize":e[1]||(e[1]=a=>w(h)?h.value=a:h=a),"page-sizes":[10,20,30,40],disabled:!1,background:!0,layout:"prev, pager, next, jumper, ->, sizes, total",total:o(D),onCurrentChange:v,onSizeChange:v},null,8,["current-page","page-size","total"])]),t(P,{modelValue:o(c),"onUpdate:modelValue":e[2]||(e[2]=a=>w(c)?c.value=a:c=a)},{header:l(()=>e[3]||(e[3]=[g("h4",null,"查看商品的详情",-1)])),default:l(()=>[g("div",ee,[t(M,{height:"500px"},{default:l(()=>[(m(),C(z,null,I(4,a=>t(K,{key:a},{default:l(()=>[g("h3",te,[g("img",{src:o(p)?.skuDefaultImg,alt:"",style:{width:"100%",height:"100%"}},null,8,le)])]),_:2},1024)),64))]),_:1})]),t(x,null,{default:l(()=>[t(d,{span:6},{default:l(()=>e[4]||(e[4]=[r("名称")])),_:1,__:[4]}),t(d,{span:18},{default:l(()=>[r(S(o(p)?.skuName),1)]),_:1})]),_:1}),t(x,null,{default:l(()=>[t(d,{span:6},{default:l(()=>e[5]||(e[5]=[r("描述")])),_:1,__:[5]}),t(d,{span:18},{default:l(()=>[r(S(o(p)?.skuDesc),1)]),_:1})]),_:1}),t(x,null,{default:l(()=>[t(d,{span:6},{default:l(()=>e[6]||(e[6]=[r("价格")])),_:1,__:[6]}),t(d,{span:18},{default:l(()=>[r(S(o(p)?.price),1)]),_:1})]),_:1}),t(x,null,{default:l(()=>[t(d,{span:6},{default:l(()=>e[7]||(e[7]=[r("平台属性")])),_:1,__:[7]}),t(d,{span:18},{default:l(()=>[(m(!0),C(z,null,I(o(p)?.skuAttrValueList,a=>(m(),$(V,{key:a.id},{default:l(()=>[r(S(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),t(x,null,{default:l(()=>[t(d,{span:6},{default:l(()=>e[8]||(e[8]=[r("销售属性")])),_:1,__:[8]}),t(d,{span:18},{default:l(()=>[(m(!0),C(z,null,I(o(p)?.skuSaleAttrValueList,a=>(m(),$(V,{key:a.saleAttrId},{default:l(()=>[r(S(a.saleAttrName),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),se=R(ae,[["__scopeId","data-v-a07ad8aa"]]);export{se as default};
